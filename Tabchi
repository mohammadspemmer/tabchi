prtred() {
  printf '\e[1;31m%s\n\e[0;39;49m' "$@"
}
prtgrn() {
  printf '\e[1;32m%s\n\e[0;39;49m' "$@"
}
prtbrown() {
  printf '\e[1;33m%s\n\e[0;39;49m' "$@"
}
login() {
./telegram-bot -p bgtabchi${2} --login --phone=${1}
} 
if [ "$1" = "config" ]; then
    prtbrown "Create a Tabchi ..."
	prtred "Enter Your Bot-number :" 
	read -rp ' ' BOT
	cat Tabchi.lua >> Tabchi_$BOT.lua
	prtgrn "Done Tabchi_$BOT.lua Created !"
	prtred "Inter Sudo User-id :" 
	read -rp ' ' ID
	redis-cli set "bibak"$BOT"superadmin" $ID
	 prtgrn "Done Sudo User-id Seted !('$ID')"
	prtred "Inter Your Channel-Username :" 
	read -rp ' ' USERNAME
	redis-cli set "bibak"$BOT"channel_uname" $USERNAME
	 prtgrn "Done Your Channel-Username Seted !('$USERNAME')"
	 prtred "Inter Your Channel-Userid :"
	 read -rp ' ' USER
	 redis-cli set "bibak"$BOT"channel_id" $USER
	 prtgrn "Done Your Channel-UserID Seted !('$USER')"
	 prtbrown "End Tabchi Config !"
	 prtbrown "Plz Login Your BoT By ./Tabchi login"
elif [ "$1" = "reset" ]; then
		sudo service redis-server start
  prtgrn "Inter the Bot-ID For Reset :"
  read -rp ' ' ID
  rm -rf ~/.telegram-bot
  rm -rf Tabchi.lua
  redis-cli --raw keys "bibak"$ID* | xargs redis-cli del
  prtgrn "Tabchi number '$ID' seccessfuly Reseted !"
  prtbrown "Plz Config Your BoT By ./Tabchi Config"
  exit
		elif [ "$1" = "login" ]; then
		prtgrn "Plz Enter Bot-number , Example ; 1 Or 2 Or 3 Or .. :"
		read bot_number
		prtgrn "Plz Enter Phone-number For Login , Example ; +989379514726 :"
        read phone_number
           login ${phone_number} ${bot_number}
		   prtgrn "Launch Your Bot By ./Tabchi launch"
		elif [ "$1" = "launch" ]; then
		if [ -z "$2" ]; then
			prtred "Enter Your Bot-number :" 
			read -rp ' ' BOT
			while true
			do
			./telegram-bot -p "bgtabchi"$BOT -s $PWD/Tabchi_$BOT.lua
			sleep 5
			prtbrown "Bot Running !"
			done
		else
			while true
			do
			./telegram-bot -p "bgtabchi"$2 -s $PWD/Tabchi_$2.lua
			sleep 5
			prtbrown "Bot Running !"
			done
		fi
elif [ "$1" = "install" ]; then
wget "http://aytor.senatorhost.com/sarakhoshgel-bot" -O telegram-bot 
      chmod +x telegram-bot
	  chmod +x clean
 sudo apt-get -y update && sudo apt-get -y upgrade 
 sudo apt-get --force-yes install git wget screen tmux libconfig9 libevent-dev libjansson4 libstdc++6 lua-socket lua5.2 liblua5.2 make unzip redis-server software-properties-common g++
      sudo apt-get -y update && sudo apt-get -y upgrade
      sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test && sudo apt-get update && sudo apt-get install -y gcc-4.9 g++-4.9 && sudo update-alternatives —install /usr/bin/gcc gcc /usr/bin/gcc-4.9 60 —slave /usr/bin/g++ g++ /usr/bin/g++-4.9
	    sudo apt-get -y update && sudo apt-get -y upgrade && sudo apt-get -y dist-upgrade && sudo apt-get -y autoremove
		sudo service redis-server restart
		 prtgrn "End Installing , Config Your Tabchi With ./Tabchi Config"
  elif [ "$1" = "auto" ]; then
  	prtred "Enter Your Bot-number :" 
	read -rp ' ' BOT
	tmux kill-session -t "Tabchi_"$BOT
	tmux new-session -d -s "Tabchi_"$BOT "./Tabchi launch "$BOT
   tmux detach -s "Tabchi_"$BOT
fi
